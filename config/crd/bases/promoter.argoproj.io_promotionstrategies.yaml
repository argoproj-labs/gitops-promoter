---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.20.0
  name: promotionstrategies.promoter.argoproj.io
spec:
  group: promoter.argoproj.io
  names:
    kind: PromotionStrategy
    listKind: PromotionStrategyList
    plural: promotionstrategies
    singular: promotionstrategy
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: PromotionStrategy is the Schema for the promotionstrategies API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: PromotionStrategySpec defines the desired state of PromotionStrategy
            properties:
              activeCommitStatuses:
                description: |-
                  ActiveCommitStatuses are commit statuses describing an actively running dry commit. If an active commit status
                  is failing for an environment, subsequent environments will not deploy the failing commit.

                  The commit statuses specified in this field apply to all environments in the promotion sequence. You can also
                  specify commit statuses for individual environments in the `environments` field.
                items:
                  description: CommitStatusSelector is used to select commit statuses
                    by their key.
                  properties:
                    key:
                      maxLength: 63
                      minLength: 1
                      pattern: ([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]
                      type: string
                  required:
                  - key
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - key
                x-kubernetes-list-type: map
              environments:
                description: Environments is the sequence of environments that a dry
                  commit will be promoted through.
                items:
                  description: Environment defines a single environment in the promotion
                    sequence.
                  properties:
                    activeCommitStatuses:
                      description: |-
                        ActiveCommitStatuses are commit statuses describing an actively running dry commit. If an active commit status
                        is failing for an environment, subsequent environments will not deploy the failing commit.

                        The commit statuses specified in this field apply to this environment only. You can also specify commit statuses
                        for all environments in the `spec.activeCommitStatuses` field.
                      items:
                        description: CommitStatusSelector is used to select commit
                          statuses by their key.
                        properties:
                          key:
                            maxLength: 63
                            minLength: 1
                            pattern: ([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]
                            type: string
                        required:
                        - key
                        type: object
                      type: array
                      x-kubernetes-list-map-keys:
                      - key
                      x-kubernetes-list-type: map
                    autoMerge:
                      default: true
                      description: |-
                        AutoMerge determines whether the dry commit should be automatically merged into the next branch in the sequence.
                        If false, the dry commit will be proposed but not merged.
                      type: boolean
                    branch:
                      description: Branch is the name of the active branch for the
                        environment.
                      type: string
                    proposedCommitStatuses:
                      description: |-
                        ProposedCommitStatuses are commit statuses describing a proposed dry commit, i.e. one that is not yet running
                        in a live environment. If a proposed commit status is failing for a given environment, the dry commit will not
                        be promoted to that environment.

                        The commit statuses specified in this field apply to this environment only. You can also specify commit statuses
                        for all environments in the `spec.proposedCommitStatuses` field.
                      items:
                        description: CommitStatusSelector is used to select commit
                          statuses by their key.
                        properties:
                          key:
                            maxLength: 63
                            minLength: 1
                            pattern: ([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]
                            type: string
                        required:
                        - key
                        type: object
                      type: array
                      x-kubernetes-list-map-keys:
                      - key
                      x-kubernetes-list-type: map
                  required:
                  - branch
                  type: object
                minItems: 1
                type: array
                x-kubernetes-list-map-keys:
                - branch
                x-kubernetes-list-type: map
              gitRepositoryRef:
                description: RepositoryReference indicates what repository to promote
                  commits in.
                properties:
                  name:
                    description: Name is the name of the object to refer to.
                    type: string
                required:
                - name
                type: object
              proposedCommitStatuses:
                description: |-
                  ProposedCommitStatuses are commit statuses describing a proposed dry commit, i.e. one that is not yet running
                  in a live environment. If a proposed commit status is failing for a given environment, the dry commit will not
                  be promoted to that environment.

                  The commit statuses specified in this field apply to all environments in the promotion sequence. You can also
                  specify commit statuses for individual environments in the `environments` field.
                items:
                  description: CommitStatusSelector is used to select commit statuses
                    by their key.
                  properties:
                    key:
                      maxLength: 63
                      minLength: 1
                      pattern: ([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]
                      type: string
                  required:
                  - key
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - key
                x-kubernetes-list-type: map
            required:
            - environments
            - gitRepositoryRef
            type: object
          status:
            description: PromotionStrategyStatus defines the observed state of PromotionStrategy
            properties:
              conditions:
                description: Conditions Represents the observations of the current
                  state.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              environments:
                description: Environments holds the status of each environment in
                  the promotion sequence.
                items:
                  description: EnvironmentStatus defines the observed state of an
                    environment in a PromotionStrategy.
                  properties:
                    active:
                      description: Active is the state of the active branch for the
                        environment.
                      properties:
                        commitStatuses:
                          description: CommitStatuses is a list of commit statuses
                            that are being monitored for this branch.
                          items:
                            description: ChangeRequestPolicyCommitStatusPhase defines
                              the phase of a commit status in a ChangeTransferPolicy.
                            properties:
                              key:
                                description: Key staging hydrated branch
                                maxLength: 63
                                minLength: 1
                                pattern: ([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]
                                type: string
                              phase:
                                description: Phase what phase is the status in
                                enum:
                                - pending
                                - success
                                - failure
                                type: string
                              url:
                                description: Url is the URL of the commit status
                                pattern: ^(https?://.*)?$
                                type: string
                                x-kubernetes-validations:
                                - message: must be a valid URL
                                  rule: self == '' || isURL(self)
                            required:
                            - key
                            - phase
                            type: object
                          type: array
                          x-kubernetes-list-map-keys:
                          - key
                          x-kubernetes-list-type: map
                        dry:
                          description: Dry is the dry state of the branch, which is
                            the commit that is being proposed.
                          properties:
                            author:
                              description: Author is the author of the commit
                              type: string
                            body:
                              description: Body is the body of the commit message
                                without the subject line
                              type: string
                            commitTime:
                              description: CommitTime is the time the commit was made
                              format: date-time
                              type: string
                            references:
                              description: References are the references to other
                                commits, that went into the hydration of the branch
                              items:
                                description: |-
                                  RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                  it supports only references to a commit. In the future, it may support other types of references.
                                properties:
                                  commit:
                                    description: Commit contains metadata about the
                                      commit that is related in some way to another
                                      commit.
                                    properties:
                                      author:
                                        description: Author is the author of the commit.
                                        type: string
                                      body:
                                        description: Body is the body of the commit
                                          message, excluding the subject line, i.e.
                                          `git show --format=%b`.
                                        type: string
                                      date:
                                        description: Date is the date of the commit,
                                          formatted as by `git show -s --format=%aI`.
                                        format: date-time
                                        type: string
                                      repoURL:
                                        description: RepoURL is the URL of the repository
                                          where the commit is located.
                                        pattern: ^(https?://.*)?$
                                        type: string
                                        x-kubernetes-validations:
                                        - message: must be a valid URL
                                          rule: self == '' || isURL(self)
                                      sha:
                                        description: Sha is the commit hash.
                                        type: string
                                      subject:
                                        description: Subject is the subject line of
                                          the commit message, i.e. `git show --format=%s`.
                                        type: string
                                    type: object
                                type: object
                              type: array
                            repoURL:
                              description: RepoURL is the URL of the repository where
                                the commit is located
                              pattern: ^(https?://.*)?$
                              type: string
                              x-kubernetes-validations:
                              - message: must be a valid URL
                                rule: self == '' || isURL(self)
                            sha:
                              description: Sha is the SHA of the commit in the branch
                              type: string
                            subject:
                              description: Subject is the subject line of the commit
                                message
                              type: string
                          type: object
                        hydrated:
                          description: Hydrated is the hydrated state of the branch,
                            which is the commit that is currently being worked on.
                          properties:
                            author:
                              description: Author is the author of the commit
                              type: string
                            body:
                              description: Body is the body of the commit message
                                without the subject line
                              type: string
                            commitTime:
                              description: CommitTime is the time the commit was made
                              format: date-time
                              type: string
                            references:
                              description: References are the references to other
                                commits, that went into the hydration of the branch
                              items:
                                description: |-
                                  RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                  it supports only references to a commit. In the future, it may support other types of references.
                                properties:
                                  commit:
                                    description: Commit contains metadata about the
                                      commit that is related in some way to another
                                      commit.
                                    properties:
                                      author:
                                        description: Author is the author of the commit.
                                        type: string
                                      body:
                                        description: Body is the body of the commit
                                          message, excluding the subject line, i.e.
                                          `git show --format=%b`.
                                        type: string
                                      date:
                                        description: Date is the date of the commit,
                                          formatted as by `git show -s --format=%aI`.
                                        format: date-time
                                        type: string
                                      repoURL:
                                        description: RepoURL is the URL of the repository
                                          where the commit is located.
                                        pattern: ^(https?://.*)?$
                                        type: string
                                        x-kubernetes-validations:
                                        - message: must be a valid URL
                                          rule: self == '' || isURL(self)
                                      sha:
                                        description: Sha is the commit hash.
                                        type: string
                                      subject:
                                        description: Subject is the subject line of
                                          the commit message, i.e. `git show --format=%s`.
                                        type: string
                                    type: object
                                type: object
                              type: array
                            repoURL:
                              description: RepoURL is the URL of the repository where
                                the commit is located
                              pattern: ^(https?://.*)?$
                              type: string
                              x-kubernetes-validations:
                              - message: must be a valid URL
                                rule: self == '' || isURL(self)
                            sha:
                              description: Sha is the SHA of the commit in the branch
                              type: string
                            subject:
                              description: Subject is the subject line of the commit
                                message
                              type: string
                          type: object
                        note:
                          description: Note is the hydrator metadata from the git
                            note attached to the hydrated commit.
                          properties:
                            author:
                              description: Author is the author of the dry commit
                                that was used to hydrate the branch.
                              type: string
                            body:
                              description: Body is the body of the dry commit that
                                was used to hydrate the branch without the subject.
                              type: string
                            date:
                              description: Date is the date of the dry commit that
                                was used to hydrate the branch.
                              format: date-time
                              type: string
                            drySha:
                              description: DrySha is the SHA of the commit that was
                                used as the dry source for hydration.
                              type: string
                            references:
                              description: References are the references to other
                                commits, that went into the hydration of the branch.
                              items:
                                description: |-
                                  RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                  it supports only references to a commit. In the future, it may support other types of references.
                                properties:
                                  commit:
                                    description: Commit contains metadata about the
                                      commit that is related in some way to another
                                      commit.
                                    properties:
                                      author:
                                        description: Author is the author of the commit.
                                        type: string
                                      body:
                                        description: Body is the body of the commit
                                          message, excluding the subject line, i.e.
                                          `git show --format=%b`.
                                        type: string
                                      date:
                                        description: Date is the date of the commit,
                                          formatted as by `git show -s --format=%aI`.
                                        format: date-time
                                        type: string
                                      repoURL:
                                        description: RepoURL is the URL of the repository
                                          where the commit is located.
                                        pattern: ^(https?://.*)?$
                                        type: string
                                        x-kubernetes-validations:
                                        - message: must be a valid URL
                                          rule: self == '' || isURL(self)
                                      sha:
                                        description: Sha is the commit hash.
                                        type: string
                                      subject:
                                        description: Subject is the subject line of
                                          the commit message, i.e. `git show --format=%s`.
                                        type: string
                                    type: object
                                type: object
                              type: array
                            repoURL:
                              description: RepoURL is the URL of the repository where
                                the commit is located.
                              type: string
                            subject:
                              description: Subject is the subject line of the dry
                                commit that was used to hydrate the branch.
                              type: string
                          type: object
                      type: object
                    branch:
                      description: Branch is the name of the active branch for the
                        environment.
                      type: string
                    history:
                      description: |-
                        History defines the history of promoted changes done by the PromotionStrategy for each environment.
                        You can think of it as a list of PRs merged by GitOps Promoter. It will not include changes that were
                        manually merged. The history length is hard-coded to be at most 5 entries. This may change in the future.
                        History is constructed on a best-effort basis and should be used for informational purposes only.
                        History is in reverse chronological order (newest is first).
                      items:
                        description: History describes a particular change that was
                          promoted by the ChangeTransferPolicy.
                        properties:
                          active:
                            description: Active is the state of the active branch
                              at the time the PR was merged.
                            properties:
                              commitStatuses:
                                description: CommitStatuses is a list of commit statuses
                                  that are being monitored for this branch.
                                items:
                                  description: ChangeRequestPolicyCommitStatusPhase
                                    defines the phase of a commit status in a ChangeTransferPolicy.
                                  properties:
                                    key:
                                      description: Key staging hydrated branch
                                      maxLength: 63
                                      minLength: 1
                                      pattern: ([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]
                                      type: string
                                    phase:
                                      description: Phase what phase is the status
                                        in
                                      enum:
                                      - pending
                                      - success
                                      - failure
                                      type: string
                                    url:
                                      description: Url is the URL of the commit status
                                      pattern: ^(https?://.*)?$
                                      type: string
                                      x-kubernetes-validations:
                                      - message: must be a valid URL
                                        rule: self == '' || isURL(self)
                                  required:
                                  - key
                                  - phase
                                  type: object
                                type: array
                                x-kubernetes-list-map-keys:
                                - key
                                x-kubernetes-list-type: map
                              dry:
                                description: Dry is the dry state of the branch, which
                                  is the commit that is being proposed.
                                properties:
                                  author:
                                    description: Author is the author of the commit
                                    type: string
                                  body:
                                    description: Body is the body of the commit message
                                      without the subject line
                                    type: string
                                  commitTime:
                                    description: CommitTime is the time the commit
                                      was made
                                    format: date-time
                                    type: string
                                  references:
                                    description: References are the references to
                                      other commits, that went into the hydration
                                      of the branch
                                    items:
                                      description: |-
                                        RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                        it supports only references to a commit. In the future, it may support other types of references.
                                      properties:
                                        commit:
                                          description: Commit contains metadata about
                                            the commit that is related in some way
                                            to another commit.
                                          properties:
                                            author:
                                              description: Author is the author of
                                                the commit.
                                              type: string
                                            body:
                                              description: Body is the body of the
                                                commit message, excluding the subject
                                                line, i.e. `git show --format=%b`.
                                              type: string
                                            date:
                                              description: Date is the date of the
                                                commit, formatted as by `git show
                                                -s --format=%aI`.
                                              format: date-time
                                              type: string
                                            repoURL:
                                              description: RepoURL is the URL of the
                                                repository where the commit is located.
                                              pattern: ^(https?://.*)?$
                                              type: string
                                              x-kubernetes-validations:
                                              - message: must be a valid URL
                                                rule: self == '' || isURL(self)
                                            sha:
                                              description: Sha is the commit hash.
                                              type: string
                                            subject:
                                              description: Subject is the subject
                                                line of the commit message, i.e. `git
                                                show --format=%s`.
                                              type: string
                                          type: object
                                      type: object
                                    type: array
                                  repoURL:
                                    description: RepoURL is the URL of the repository
                                      where the commit is located
                                    pattern: ^(https?://.*)?$
                                    type: string
                                    x-kubernetes-validations:
                                    - message: must be a valid URL
                                      rule: self == '' || isURL(self)
                                  sha:
                                    description: Sha is the SHA of the commit in the
                                      branch
                                    type: string
                                  subject:
                                    description: Subject is the subject line of the
                                      commit message
                                    type: string
                                type: object
                              hydrated:
                                description: Hydrated is the hydrated state of the
                                  branch, which is the commit that is currently being
                                  worked on.
                                properties:
                                  author:
                                    description: Author is the author of the commit
                                    type: string
                                  body:
                                    description: Body is the body of the commit message
                                      without the subject line
                                    type: string
                                  commitTime:
                                    description: CommitTime is the time the commit
                                      was made
                                    format: date-time
                                    type: string
                                  references:
                                    description: References are the references to
                                      other commits, that went into the hydration
                                      of the branch
                                    items:
                                      description: |-
                                        RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                        it supports only references to a commit. In the future, it may support other types of references.
                                      properties:
                                        commit:
                                          description: Commit contains metadata about
                                            the commit that is related in some way
                                            to another commit.
                                          properties:
                                            author:
                                              description: Author is the author of
                                                the commit.
                                              type: string
                                            body:
                                              description: Body is the body of the
                                                commit message, excluding the subject
                                                line, i.e. `git show --format=%b`.
                                              type: string
                                            date:
                                              description: Date is the date of the
                                                commit, formatted as by `git show
                                                -s --format=%aI`.
                                              format: date-time
                                              type: string
                                            repoURL:
                                              description: RepoURL is the URL of the
                                                repository where the commit is located.
                                              pattern: ^(https?://.*)?$
                                              type: string
                                              x-kubernetes-validations:
                                              - message: must be a valid URL
                                                rule: self == '' || isURL(self)
                                            sha:
                                              description: Sha is the commit hash.
                                              type: string
                                            subject:
                                              description: Subject is the subject
                                                line of the commit message, i.e. `git
                                                show --format=%s`.
                                              type: string
                                          type: object
                                      type: object
                                    type: array
                                  repoURL:
                                    description: RepoURL is the URL of the repository
                                      where the commit is located
                                    pattern: ^(https?://.*)?$
                                    type: string
                                    x-kubernetes-validations:
                                    - message: must be a valid URL
                                      rule: self == '' || isURL(self)
                                  sha:
                                    description: Sha is the SHA of the commit in the
                                      branch
                                    type: string
                                  subject:
                                    description: Subject is the subject line of the
                                      commit message
                                    type: string
                                type: object
                              note:
                                description: Note is the hydrator metadata from the
                                  git note attached to the hydrated commit.
                                properties:
                                  author:
                                    description: Author is the author of the dry commit
                                      that was used to hydrate the branch.
                                    type: string
                                  body:
                                    description: Body is the body of the dry commit
                                      that was used to hydrate the branch without
                                      the subject.
                                    type: string
                                  date:
                                    description: Date is the date of the dry commit
                                      that was used to hydrate the branch.
                                    format: date-time
                                    type: string
                                  drySha:
                                    description: DrySha is the SHA of the commit that
                                      was used as the dry source for hydration.
                                    type: string
                                  references:
                                    description: References are the references to
                                      other commits, that went into the hydration
                                      of the branch.
                                    items:
                                      description: |-
                                        RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                        it supports only references to a commit. In the future, it may support other types of references.
                                      properties:
                                        commit:
                                          description: Commit contains metadata about
                                            the commit that is related in some way
                                            to another commit.
                                          properties:
                                            author:
                                              description: Author is the author of
                                                the commit.
                                              type: string
                                            body:
                                              description: Body is the body of the
                                                commit message, excluding the subject
                                                line, i.e. `git show --format=%b`.
                                              type: string
                                            date:
                                              description: Date is the date of the
                                                commit, formatted as by `git show
                                                -s --format=%aI`.
                                              format: date-time
                                              type: string
                                            repoURL:
                                              description: RepoURL is the URL of the
                                                repository where the commit is located.
                                              pattern: ^(https?://.*)?$
                                              type: string
                                              x-kubernetes-validations:
                                              - message: must be a valid URL
                                                rule: self == '' || isURL(self)
                                            sha:
                                              description: Sha is the commit hash.
                                              type: string
                                            subject:
                                              description: Subject is the subject
                                                line of the commit message, i.e. `git
                                                show --format=%s`.
                                              type: string
                                          type: object
                                      type: object
                                    type: array
                                  repoURL:
                                    description: RepoURL is the URL of the repository
                                      where the commit is located.
                                    type: string
                                  subject:
                                    description: Subject is the subject line of the
                                      dry commit that was used to hydrate the branch.
                                    type: string
                                type: object
                            type: object
                          proposed:
                            description: Proposed is the state of the proposed branch
                              at the time the PR was merged.
                            properties:
                              commitStatuses:
                                description: |-
                                  CommitStatuses is a list of commit statuses that were being monitored for this branch.
                                  This contains the state frozen at the moment the PR was merged.
                                items:
                                  description: ChangeRequestPolicyCommitStatusPhase
                                    defines the phase of a commit status in a ChangeTransferPolicy.
                                  properties:
                                    key:
                                      description: Key staging hydrated branch
                                      maxLength: 63
                                      minLength: 1
                                      pattern: ([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]
                                      type: string
                                    phase:
                                      description: Phase what phase is the status
                                        in
                                      enum:
                                      - pending
                                      - success
                                      - failure
                                      type: string
                                    url:
                                      description: Url is the URL of the commit status
                                      pattern: ^(https?://.*)?$
                                      type: string
                                      x-kubernetes-validations:
                                      - message: must be a valid URL
                                        rule: self == '' || isURL(self)
                                  required:
                                  - key
                                  - phase
                                  type: object
                                type: array
                              hydrated:
                                description: Hydrated is the hydrated state of the
                                  branch, which is the commit that is currently being
                                  worked on.
                                properties:
                                  author:
                                    description: Author is the author of the commit
                                    type: string
                                  body:
                                    description: Body is the body of the commit message
                                      without the subject line
                                    type: string
                                  commitTime:
                                    description: CommitTime is the time the commit
                                      was made
                                    format: date-time
                                    type: string
                                  references:
                                    description: References are the references to
                                      other commits, that went into the hydration
                                      of the branch
                                    items:
                                      description: |-
                                        RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                        it supports only references to a commit. In the future, it may support other types of references.
                                      properties:
                                        commit:
                                          description: Commit contains metadata about
                                            the commit that is related in some way
                                            to another commit.
                                          properties:
                                            author:
                                              description: Author is the author of
                                                the commit.
                                              type: string
                                            body:
                                              description: Body is the body of the
                                                commit message, excluding the subject
                                                line, i.e. `git show --format=%b`.
                                              type: string
                                            date:
                                              description: Date is the date of the
                                                commit, formatted as by `git show
                                                -s --format=%aI`.
                                              format: date-time
                                              type: string
                                            repoURL:
                                              description: RepoURL is the URL of the
                                                repository where the commit is located.
                                              pattern: ^(https?://.*)?$
                                              type: string
                                              x-kubernetes-validations:
                                              - message: must be a valid URL
                                                rule: self == '' || isURL(self)
                                            sha:
                                              description: Sha is the commit hash.
                                              type: string
                                            subject:
                                              description: Subject is the subject
                                                line of the commit message, i.e. `git
                                                show --format=%s`.
                                              type: string
                                          type: object
                                      type: object
                                    type: array
                                  repoURL:
                                    description: RepoURL is the URL of the repository
                                      where the commit is located
                                    pattern: ^(https?://.*)?$
                                    type: string
                                    x-kubernetes-validations:
                                    - message: must be a valid URL
                                      rule: self == '' || isURL(self)
                                  sha:
                                    description: Sha is the SHA of the commit in the
                                      branch
                                    type: string
                                  subject:
                                    description: Subject is the subject line of the
                                      commit message
                                    type: string
                                type: object
                            type: object
                          pullRequest:
                            description: PullRequest is the state of the pull request
                              that was created for this ChangeTransferPolicy.
                            properties:
                              externallyMergedOrClosed:
                                description: |-
                                  ExternallyMergedOrClosed indicates that the pull request was merged or closed externally.
                                  This is set to true when the pull request has an ID but is no longer found on the SCM provider.
                                  When true, the State field will be empty ("") since we cannot determine if it was merged or closed.
                                  This status is preserved even after the PullRequest resource is deleted, maintaining a historical
                                  record of the external action until a new pull request is created for this environment.
                                type: boolean
                              id:
                                description: ID is the unique identifier of the pull
                                  request, set by the SCM.
                                type: string
                              prCreationTime:
                                description: PRCreationTime is the time when the pull
                                  request was created.
                                format: date-time
                                type: string
                              prMergeTime:
                                description: |-
                                  PRMergeTime is the time when the pull request was merged. This time can vary slightly from the actual merge time because
                                  it is the time when the ChangeTransferPolicy controller sets the pull requests spec to merge. In the future we plan on making
                                  this time more accurate by fetching the actual merge time from the SCM via the webhook this would then be updated in the git note
                                  for that commit.
                                format: date-time
                                type: string
                              state:
                                description: State is the state of the pull request.
                                enum:
                                - closed
                                - merged
                                - open
                                type: string
                              url:
                                description: Url is the URL of the pull request.
                                pattern: ^(https?://.*)?$
                                type: string
                                x-kubernetes-validations:
                                - message: must be a valid URL
                                  rule: self == '' || isURL(self)
                            type: object
                        type: object
                      type: array
                    lastHealthyDryShas:
                      description: LastHealthyDryShas is a list of dry commits that
                        were observed to be healthy in the environment.
                      items:
                        description: HealthyDryShas is a list of dry commits that
                          were observed to be healthy in the environment.
                        properties:
                          sha:
                            description: Sha is the commit SHA of the dry commit that
                              was observed to be healthy.
                            type: string
                          time:
                            description: Time is the time when the proposed commit
                              for the given dry SHA was merged into the active branch.
                            format: date-time
                            type: string
                        required:
                        - sha
                        - time
                        type: object
                      type: array
                    proposed:
                      description: Proposed is the state of the proposed branch for
                        the environment.
                      properties:
                        commitStatuses:
                          description: CommitStatuses is a list of commit statuses
                            that are being monitored for this branch.
                          items:
                            description: ChangeRequestPolicyCommitStatusPhase defines
                              the phase of a commit status in a ChangeTransferPolicy.
                            properties:
                              key:
                                description: Key staging hydrated branch
                                maxLength: 63
                                minLength: 1
                                pattern: ([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]
                                type: string
                              phase:
                                description: Phase what phase is the status in
                                enum:
                                - pending
                                - success
                                - failure
                                type: string
                              url:
                                description: Url is the URL of the commit status
                                pattern: ^(https?://.*)?$
                                type: string
                                x-kubernetes-validations:
                                - message: must be a valid URL
                                  rule: self == '' || isURL(self)
                            required:
                            - key
                            - phase
                            type: object
                          type: array
                          x-kubernetes-list-map-keys:
                          - key
                          x-kubernetes-list-type: map
                        dry:
                          description: Dry is the dry state of the branch, which is
                            the commit that is being proposed.
                          properties:
                            author:
                              description: Author is the author of the commit
                              type: string
                            body:
                              description: Body is the body of the commit message
                                without the subject line
                              type: string
                            commitTime:
                              description: CommitTime is the time the commit was made
                              format: date-time
                              type: string
                            references:
                              description: References are the references to other
                                commits, that went into the hydration of the branch
                              items:
                                description: |-
                                  RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                  it supports only references to a commit. In the future, it may support other types of references.
                                properties:
                                  commit:
                                    description: Commit contains metadata about the
                                      commit that is related in some way to another
                                      commit.
                                    properties:
                                      author:
                                        description: Author is the author of the commit.
                                        type: string
                                      body:
                                        description: Body is the body of the commit
                                          message, excluding the subject line, i.e.
                                          `git show --format=%b`.
                                        type: string
                                      date:
                                        description: Date is the date of the commit,
                                          formatted as by `git show -s --format=%aI`.
                                        format: date-time
                                        type: string
                                      repoURL:
                                        description: RepoURL is the URL of the repository
                                          where the commit is located.
                                        pattern: ^(https?://.*)?$
                                        type: string
                                        x-kubernetes-validations:
                                        - message: must be a valid URL
                                          rule: self == '' || isURL(self)
                                      sha:
                                        description: Sha is the commit hash.
                                        type: string
                                      subject:
                                        description: Subject is the subject line of
                                          the commit message, i.e. `git show --format=%s`.
                                        type: string
                                    type: object
                                type: object
                              type: array
                            repoURL:
                              description: RepoURL is the URL of the repository where
                                the commit is located
                              pattern: ^(https?://.*)?$
                              type: string
                              x-kubernetes-validations:
                              - message: must be a valid URL
                                rule: self == '' || isURL(self)
                            sha:
                              description: Sha is the SHA of the commit in the branch
                              type: string
                            subject:
                              description: Subject is the subject line of the commit
                                message
                              type: string
                          type: object
                        hydrated:
                          description: Hydrated is the hydrated state of the branch,
                            which is the commit that is currently being worked on.
                          properties:
                            author:
                              description: Author is the author of the commit
                              type: string
                            body:
                              description: Body is the body of the commit message
                                without the subject line
                              type: string
                            commitTime:
                              description: CommitTime is the time the commit was made
                              format: date-time
                              type: string
                            references:
                              description: References are the references to other
                                commits, that went into the hydration of the branch
                              items:
                                description: |-
                                  RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                  it supports only references to a commit. In the future, it may support other types of references.
                                properties:
                                  commit:
                                    description: Commit contains metadata about the
                                      commit that is related in some way to another
                                      commit.
                                    properties:
                                      author:
                                        description: Author is the author of the commit.
                                        type: string
                                      body:
                                        description: Body is the body of the commit
                                          message, excluding the subject line, i.e.
                                          `git show --format=%b`.
                                        type: string
                                      date:
                                        description: Date is the date of the commit,
                                          formatted as by `git show -s --format=%aI`.
                                        format: date-time
                                        type: string
                                      repoURL:
                                        description: RepoURL is the URL of the repository
                                          where the commit is located.
                                        pattern: ^(https?://.*)?$
                                        type: string
                                        x-kubernetes-validations:
                                        - message: must be a valid URL
                                          rule: self == '' || isURL(self)
                                      sha:
                                        description: Sha is the commit hash.
                                        type: string
                                      subject:
                                        description: Subject is the subject line of
                                          the commit message, i.e. `git show --format=%s`.
                                        type: string
                                    type: object
                                type: object
                              type: array
                            repoURL:
                              description: RepoURL is the URL of the repository where
                                the commit is located
                              pattern: ^(https?://.*)?$
                              type: string
                              x-kubernetes-validations:
                              - message: must be a valid URL
                                rule: self == '' || isURL(self)
                            sha:
                              description: Sha is the SHA of the commit in the branch
                              type: string
                            subject:
                              description: Subject is the subject line of the commit
                                message
                              type: string
                          type: object
                        note:
                          description: Note is the hydrator metadata from the git
                            note attached to the hydrated commit.
                          properties:
                            author:
                              description: Author is the author of the dry commit
                                that was used to hydrate the branch.
                              type: string
                            body:
                              description: Body is the body of the dry commit that
                                was used to hydrate the branch without the subject.
                              type: string
                            date:
                              description: Date is the date of the dry commit that
                                was used to hydrate the branch.
                              format: date-time
                              type: string
                            drySha:
                              description: DrySha is the SHA of the commit that was
                                used as the dry source for hydration.
                              type: string
                            references:
                              description: References are the references to other
                                commits, that went into the hydration of the branch.
                              items:
                                description: |-
                                  RevisionReference contains a reference to a some information that is related in some way to another commit. For now,
                                  it supports only references to a commit. In the future, it may support other types of references.
                                properties:
                                  commit:
                                    description: Commit contains metadata about the
                                      commit that is related in some way to another
                                      commit.
                                    properties:
                                      author:
                                        description: Author is the author of the commit.
                                        type: string
                                      body:
                                        description: Body is the body of the commit
                                          message, excluding the subject line, i.e.
                                          `git show --format=%b`.
                                        type: string
                                      date:
                                        description: Date is the date of the commit,
                                          formatted as by `git show -s --format=%aI`.
                                        format: date-time
                                        type: string
                                      repoURL:
                                        description: RepoURL is the URL of the repository
                                          where the commit is located.
                                        pattern: ^(https?://.*)?$
                                        type: string
                                        x-kubernetes-validations:
                                        - message: must be a valid URL
                                          rule: self == '' || isURL(self)
                                      sha:
                                        description: Sha is the commit hash.
                                        type: string
                                      subject:
                                        description: Subject is the subject line of
                                          the commit message, i.e. `git show --format=%s`.
                                        type: string
                                    type: object
                                type: object
                              type: array
                            repoURL:
                              description: RepoURL is the URL of the repository where
                                the commit is located.
                              type: string
                            subject:
                              description: Subject is the subject line of the dry
                                commit that was used to hydrate the branch.
                              type: string
                          type: object
                      type: object
                    pullRequest:
                      description: PullRequest is the state of the pull request that
                        was created for this environment.
                      properties:
                        externallyMergedOrClosed:
                          description: |-
                            ExternallyMergedOrClosed indicates that the pull request was merged or closed externally.
                            This is set to true when the pull request has an ID but is no longer found on the SCM provider.
                            When true, the State field will be empty ("") since we cannot determine if it was merged or closed.
                            This status is preserved even after the PullRequest resource is deleted, maintaining a historical
                            record of the external action until a new pull request is created for this environment.
                          type: boolean
                        id:
                          description: ID is the unique identifier of the pull request,
                            set by the SCM.
                          type: string
                        prCreationTime:
                          description: PRCreationTime is the time when the pull request
                            was created.
                          format: date-time
                          type: string
                        prMergeTime:
                          description: |-
                            PRMergeTime is the time when the pull request was merged. This time can vary slightly from the actual merge time because
                            it is the time when the ChangeTransferPolicy controller sets the pull requests spec to merge. In the future we plan on making
                            this time more accurate by fetching the actual merge time from the SCM via the webhook this would then be updated in the git note
                            for that commit.
                          format: date-time
                          type: string
                        state:
                          description: State is the state of the pull request.
                          enum:
                          - closed
                          - merged
                          - open
                          type: string
                        url:
                          description: Url is the URL of the pull request.
                          pattern: ^(https?://.*)?$
                          type: string
                          x-kubernetes-validations:
                          - message: must be a valid URL
                            rule: self == '' || isURL(self)
                      type: object
                  required:
                  - active
                  - branch
                  - proposed
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - branch
                x-kubernetes-list-type: map
            required:
            - environments
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
