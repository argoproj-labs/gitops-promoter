/*
Copyright 2024.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
// Code generated by controller-gen-v0.20. DO NOT EDIT.

package v1alpha1

// GitCommitStatusSpecApplyConfiguration represents a declarative configuration of the GitCommitStatusSpec type for use
// with apply.
//
// EDIT THIS FILE!  THIS IS SCAFFOLDING FOR YOU TO OWN!
// NOTE: json tags are required.  Any new fields you add must have json tags for the fields to be serialized.
// GitCommitStatusSpec defines the desired state of GitCommitStatus
type GitCommitStatusSpecApplyConfiguration struct {
	// PromotionStrategyRef is a reference to the promotion strategy that this commit status applies to.
	// The controller will validate commits from ALL environments in the referenced PromotionStrategy
	// where this GitCommitStatus.Spec.Key matches an entry in either:
	// - PromotionStrategy.Spec.ProposedCommitStatuses (applies to all environments), OR
	// - Environment.ProposedCommitStatuses (applies to specific environment)
	PromotionStrategyRef *ObjectReferenceApplyConfiguration `json:"promotionStrategyRef,omitempty"`
	// Key is the unique identifier for this validation rule.
	// It is used as the commit status key and in status messages.
	// This key is matched against PromotionStrategy's proposedCommitStatuses or activeCommitStatuses
	// to determine which environments this validation applies to.
	Key *string `json:"key,omitempty"`
	// Description is a human-readable description of this validation that will be shown in the SCM provider
	// (GitHub, GitLab, etc.) as the commit status description.
	// If not specified, defaults to empty string.
	Description *string `json:"description,omitempty"`
	// Target specifies which commit SHA to validate with the expression.
	// - "active": Validates the currently active/deployed commit (default behavior)
	// - "proposed": Validates the proposed commit that will be promoted
	//
	// The validation result is always reported on the PROPOSED commit (for gating), but this field
	// controls which commit's data is used in the expression evaluation.
	//
	// Examples:
	// target: "active" - "Don't promote if a revert commit is detected"
	// target: "proposed" - "Don't promote unless new commit follows naming convention"
	Target *string `json:"target,omitempty"`
	// Expression is evaluated using the expr library (github.com/expr-lang/expr) against commit data
	// for environments in the referenced PromotionStrategy.
	// The expression must return a boolean value where true indicates the validation passed.
	//
	// The commit validated is determined by the Target field:
	// - "active" (default): Validates the ACTIVE (currently deployed) commit
	// - "proposed": Validates the PROPOSED commit (what will be promoted)
	//
	// The validation result is always reported on the PROPOSED commit to enable promotion gating.
	//
	// Use Cases by Mode:
	// Active mode: State-based gating - validate current environment before allowing promotion
	// - "Don't promote until active commit has required sign-offs"
	// - "Verify current deployment meets compliance before next promotion"
	// - "Ensure active commit is not a revert before promoting"
	//
	// Proposed mode: Change-based gating - validate the incoming change itself
	// - "Don't promote unless new commit follows naming convention"
	// - "Ensure proposed commit has proper JIRA ticket reference"
	// - "Require specific author for proposed changes"
	//
	// Available variables in the expression context:
	// - Commit.SHA (string): the commit SHA being validated (active or proposed based on Target)
	// - Commit.Subject (string): the first line of the commit message
	// - Commit.Body (string): the commit message body (everything after the subject line)
	// - Commit.Author (string): commit author email address
	// - Commit.Trailers (map[string][]string): git trailers parsed from commit message
	Expression *string `json:"expression,omitempty"`
}

// GitCommitStatusSpecApplyConfiguration constructs a declarative configuration of the GitCommitStatusSpec type for use with
// apply.
func GitCommitStatusSpec() *GitCommitStatusSpecApplyConfiguration {
	return &GitCommitStatusSpecApplyConfiguration{}
}

// WithPromotionStrategyRef sets the PromotionStrategyRef field in the declarative configuration to the given value
// and returns the receiver, so that objects can be built by chaining "With" function invocations.
// If called multiple times, the PromotionStrategyRef field is set to the value of the last call.
func (b *GitCommitStatusSpecApplyConfiguration) WithPromotionStrategyRef(value *ObjectReferenceApplyConfiguration) *GitCommitStatusSpecApplyConfiguration {
	b.PromotionStrategyRef = value
	return b
}

// WithKey sets the Key field in the declarative configuration to the given value
// and returns the receiver, so that objects can be built by chaining "With" function invocations.
// If called multiple times, the Key field is set to the value of the last call.
func (b *GitCommitStatusSpecApplyConfiguration) WithKey(value string) *GitCommitStatusSpecApplyConfiguration {
	b.Key = &value
	return b
}

// WithDescription sets the Description field in the declarative configuration to the given value
// and returns the receiver, so that objects can be built by chaining "With" function invocations.
// If called multiple times, the Description field is set to the value of the last call.
func (b *GitCommitStatusSpecApplyConfiguration) WithDescription(value string) *GitCommitStatusSpecApplyConfiguration {
	b.Description = &value
	return b
}

// WithTarget sets the Target field in the declarative configuration to the given value
// and returns the receiver, so that objects can be built by chaining "With" function invocations.
// If called multiple times, the Target field is set to the value of the last call.
func (b *GitCommitStatusSpecApplyConfiguration) WithTarget(value string) *GitCommitStatusSpecApplyConfiguration {
	b.Target = &value
	return b
}

// WithExpression sets the Expression field in the declarative configuration to the given value
// and returns the receiver, so that objects can be built by chaining "With" function invocations.
// If called multiple times, the Expression field is set to the value of the last call.
func (b *GitCommitStatusSpecApplyConfiguration) WithExpression(value string) *GitCommitStatusSpecApplyConfiguration {
	b.Expression = &value
	return b
}
